(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login"],{"02f4":function(e,t,r){var n=r("4588"),a=r("be13");e.exports=function(e){return function(t,r){var o,s,i=String(a(t)),l=n(r),c=i.length;return l<0||l>=c?e?"":void 0:(o=i.charCodeAt(l),o<55296||o>56319||l+1===c||(s=i.charCodeAt(l+1))<56320||s>57343?e?i.charAt(l):o:e?i.slice(l,l+2):s-56320+(o-55296<<10)+65536)}}},"0390":function(e,t,r){"use strict";var n=r("02f4")(!0);e.exports=function(e,t,r){return t+(r?n(e,t).length:1)}},"0bfb":function(e,t,r){"use strict";var n=r("cb7c");e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},"11e9":function(e,t,r){var n=r("52a7"),a=r("4630"),o=r("6821"),s=r("6a99"),i=r("69a8"),l=r("c69a"),c=Object.getOwnPropertyDescriptor;t.f=r("9e1e")?c:function(e,t){if(e=o(e),t=s(t,!0),l)try{return c(e,t)}catch(r){}if(i(e,t))return a(!n.f.call(e,t),e[t])}},"214f":function(e,t,r){"use strict";r("b0c5");var n=r("2aba"),a=r("32e9"),o=r("79e5"),s=r("be13"),i=r("2b4c"),l=r("520a"),c=i("species"),u=!o((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),f=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2===r.length&&"a"===r[0]&&"b"===r[1]}();e.exports=function(e,t,r){var p=i(e),d=!o((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),m=d?!o((function(){var t=!1,r=/a/;return r.exec=function(){return t=!0,null},"split"===e&&(r.constructor={},r.constructor[c]=function(){return r}),r[p](""),!t})):void 0;if(!d||!m||"replace"===e&&!u||"split"===e&&!f){var g=/./[p],v=r(s,p,""[e],(function(e,t,r,n,a){return t.exec===l?d&&!a?{done:!0,value:g.call(t,r,n)}:{done:!0,value:e.call(r,t,n)}:{done:!1}})),b=v[0],h=v[1];n(String.prototype,e,b),a(RegExp.prototype,p,2==t?function(e,t){return h.call(e,this,t)}:function(e){return h.call(e,this)})}}},"3bbb":function(e,t,r){},"520a":function(e,t,r){"use strict";var n=r("0bfb"),a=RegExp.prototype.exec,o=String.prototype.replace,s=a,i="lastIndex",l=function(){var e=/a/,t=/b*/g;return a.call(e,"a"),a.call(t,"a"),0!==e[i]||0!==t[i]}(),c=void 0!==/()??/.exec("")[1],u=l||c;u&&(s=function(e){var t,r,s,u,f=this;return c&&(r=new RegExp("^"+f.source+"$(?!\\s)",n.call(f))),l&&(t=f[i]),s=a.call(f,e),l&&s&&(f[i]=f.global?s.index+s[0].length:t),c&&s&&s.length>1&&o.call(s[0],r,(function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(s[u]=void 0)})),s}),e.exports=s},"5dbc":function(e,t,r){var n=r("d3f4"),a=r("8b97").set;e.exports=function(e,t,r){var o,s=t.constructor;return s!==r&&"function"==typeof s&&(o=s.prototype)!==r.prototype&&n(o)&&a&&a(e,o),e}},"5f1b":function(e,t,r){"use strict";var n=r("23c6"),a=RegExp.prototype.exec;e.exports=function(e,t){var r=e.exec;if("function"===typeof r){var o=r.call(e,t);if("object"!==typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==n(e))throw new TypeError("RegExp#exec called on incompatible receiver");return a.call(e,t)}},"89d2":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"login"}},[r("div",{staticClass:"login"},[r("header",[e._v("用户登录")]),r("router-link",{staticStyle:{"font-size":"13px"},attrs:{id:"register",to:"/register"}},[e._v("\n\t\t\t注册\n\t\t")]),r("el-form",{ref:"ruleForm1",staticClass:"demo-ruleForm1",attrs:{model:e.ruleForm1,rules:e.rules,"label-width":"70px"}},[r("el-form-item",{attrs:{label:"用户名:",prop:"username"}},[r("el-input",{ref:"username",staticClass:"username",attrs:{placeholder:"请输入账号",clearable:""},model:{value:e.ruleForm1.username,callback:function(t){e.$set(e.ruleForm1,"username",t)},expression:"ruleForm1.username"}})],1),r("el-form-item",{attrs:{label:"密码:",prop:"password"}},[r("el-input",{ref:"password",staticClass:"password",attrs:{placeholder:"请输入密码",clearable:"","show-password":""},model:{value:e.ruleForm1.password,callback:function(t){e.$set(e.ruleForm1,"password",t)},expression:"ruleForm1.password"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"warning"},on:{click:function(t){return e.resetForm("ruleForm1")}}},[e._v("重置")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm1")}}},[e._v("登录")])],1)],1),r("div",[r("el-button",{staticClass:"forgot_password",attrs:{type:"text"},on:{click:function(t){e.outerVisible=!0,e.ov()}}},[e._v("忘记密码")]),r("el-dialog",{staticClass:"dialog1",attrs:{title:"找回密码",visible:e.outerVisible,width:"85%"},on:{"update:visible":function(t){e.outerVisible=t}}},[r("el-dialog",{staticClass:"dialog2",attrs:{width:"85%",title:"修改密码",visible:e.innerVisible,"append-to-body":""},on:{"update:visible":function(t){e.innerVisible=t}}},[r("el-form",{ref:"ruleForm3",staticClass:"demo-ruleForm3",attrs:{model:e.ruleForm3,rules:e.rules,"label-width":"90px"}},[r("el-form-item",{attrs:{label:"新密码:",prop:"new_password"}},[r("el-input",{ref:"new_password",attrs:{id:"new_password",placeholder:"请输入新密码",clearable:"","show-password":""},model:{value:e.ruleForm3.new_password,callback:function(t){e.$set(e.ruleForm3,"new_password",t)},expression:"ruleForm3.new_password"}})],1),r("el-form-item",{attrs:{label:"确认密码:",prop:"confirm_password"}},[r("el-input",{ref:"confirm_password",attrs:{id:"confirm_password",placeholder:"请输入确认密码",clearable:"","show-password":""},model:{value:e.ruleForm3.confirm_password,callback:function(t){e.$set(e.ruleForm3,"confirm_password",t)},expression:"ruleForm3.confirm_password"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"warning"},on:{click:function(t){return e.resetForm("ruleForm3")}}},[e._v("重 置")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.set("ruleForm3")}}},[e._v("修 改")])],1)],1),r("div",{staticClass:"sub-title"},[e._v("找回密码方式一：")]),r("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm2",attrs:{model:e.ruleForm2,rules:e.rules,"label-width":"70px"}},[r("el-form-item",{attrs:{label:"用户名:",prop:"username"}},[r("el-input",{ref:"username",staticClass:"username",attrs:{placeholder:"请输入账号",clearable:""},model:{value:e.ruleForm2.username,callback:function(t){e.$set(e.ruleForm2,"username",t)},expression:"ruleForm2.username"}})],1)],1),r("div",{staticClass:"sub-title"},[e._v("找回密码方式二：")]),e.logdisa?r("el-button",{attrs:{type:"info",disabled:e.disa},on:{click:e.tx}},[e._v("头像找回")]):e._e(),e.logdisa?e._e():r("el-button",{attrs:{type:"info",disabled:!e.disa}},[e._v("未认证")]),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.outerVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.forget("ruleForm2")}}},[e._v("确 定")])],1)],1)],1)],1),e.txzh?[r("div",{attrs:{id:"temp"}},[r("div",{staticClass:"temp"},[r("div",{staticClass:"sub-title"},[e._v("头像认证找回密码"),r("i",{staticClass:"el-icon-circle-close close",on:{click:e.close}})]),r("el-form",{ref:"ruleForm4",staticClass:"demo-ruleForm4",attrs:{model:e.ruleForm4,rules:e.rules,"label-width":"70px"}},[r("el-form-item",{attrs:{label:"用户名:",prop:"username"}},[r("el-input",{ref:"username",staticClass:"username",attrs:{placeholder:"请输入账号",clearable:""},model:{value:e.ruleForm4.username,callback:function(t){e.$set(e.ruleForm4,"username",t)},expression:"ruleForm4.username"}})],1)],1),r("el-button",{staticClass:"ann",attrs:{type:"primary"},on:{click:function(t){return e.faceValid("ruleForm4")}}},[e._v("头像认证")])],1)])]:e._e()],2)},a=[],o=r("bd86"),s=(r("a481"),r("c5f6"),{data:function(){var e=this,t=function(t,r,n){""===r?n(new Error("请再次输入密码")):r!==e.ruleForm3.new_password?n(new Error("两次输入密码不一致!")):n()};return{outerVisible:!1,innerVisible:!1,txzh:!1,count:"获取",timer:null,ruleForm1:{username:"",password:""},ruleForm2:{username:""},ruleForm4:{username:""},ruleForm3:{new_password:"",confirm_password:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^[A-Za-z0-9]{6,14}$/,min:6,max:12,message:"长度在 6 到 12 个数字或英文字符",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号码",trigger:"blur"},{pattern:/^1[3456789]\d{9}$/,message:"请输入11位手机号",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"},{pattern:/^[0-9]{6}$/,message:"请输入6位数的验证码",trigger:"blur"}],new_password:[{required:!0,message:"请输入新密码",trigger:"blur"},{pattern:/^[A-Za-z0-9]{6,14}$/,min:6,max:12,message:"长度在 6 到 12 个数字或英文字符",trigger:"blur"}],confirm_password:[{required:!0,validator:t,trigger:"blur"}],disa:!1,logdisa:!0}}},methods:{submitForm:function(e){var t=this;plus.nativeUI.showWaiting();this.$refs[e].validate((function(e){if(e){var r=t.$refs.username.value,n=t.$refs.password.value;localStorage.setItem("_account",r);var a=t.$http+"/login",o={username:r,passwd:n},s=t.$qs.stringify(o),i={headers:{"Content-Type":"application/x-www-form-urlencoded"}};t.$axios.post(a,s,i).then((function(e){plus.nativeUI.closeWaiting();var r=Number(e.data.code);if(-1===r)return console.log("error submit!!"),t.$message({title:"提示",message:e.data.message,type:"warning"}),!1;t.$router.replace("/recommend"),t.$notify({title:"成功",message:"欢迎回来",type:"success"});var n=e.data.token;localStorage.setItem("token",n)})).catch((function(e){console.log("错误信息"+e)}))}}))},resetForm:function(e){this.$refs[e].resetFields()},forget:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;var r=t.$refs.username.value,n=t.$http+"/getSmsValidCodeByAccount",a={account:r},o=t.$qs.stringify(a),s={headers:{"Content-Type":"application/x-www-form-urlencoded"}};t.$axios.post(n,o,s).then((function(e){var r=Number(e.data.code);-1!==r?t.innerVisible=!0:t.$notify({title:"提示",message:"输入信息有误",type:"warning"})})).catch((function(e){console.log("错误信息"+e)}))}))},set:function(e){var t=this;plus.nativeUI.showWaiting();this.$refs[e].validate((function(r){if(!r)return console.log("error submit!!"),!1;var n=t.$refs.new_password.value,a=localStorage.getItem("_account"),o=t.$http+"/changePasswd",s={newpasswd:n,account:a},i=t.$qs.stringify(s),l={headers:{"Content-Type":"application/x-www-form-urlencoded"}};t.$axios.post(o,i,l).then((function(r){plus.nativeUI.closeWaiting();var n=Number(r.data.code);-1!==n?(t.$notify({title:"成功",message:"密码修改成功",type:"success"}),t.innerVisible=!1,t.outerVisible=!1,t.$refs[e].resetFields()):(t.$notify({title:"提示",message:"输入信息有误",type:"warning"}),t.innerVisible=!0)})).catch((function(e){console.log("错误信息"+e)}))}))},tx:function(){this.txzh=!0,this.outerVisible=!1},close:function(){this.txzh=!1,this.outerVisible=!0},ov:function(){var e=localStorage.getItem("validStatus");e("face")>-1&&(this.disa=!0,this.logdisa=!1)},faceValid:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;var r=function(){var e=plus.camera.getCamera();e.captureImage((function(e){plus.io.resolveLocalFileSystemURL(e,(function(e){var t=e.toLocalURL();n(t)}),(function(e){console.log("读取拍照文件错误："+e.message)}))}),(function(e){console.log("读取拍照文件错误："+e.message)}),{filename:"_doc/camera/",index:1})},n=function(e){var t,r=(new Date).getTime();plus.zip.compressImage((t={src:e,dst:"_doc/"+r+".jpg",overwrite:!0,width:"800px"},Object(o["a"])(t,"width","600px"),Object(o["a"])(t,"format","jpg"),Object(o["a"])(t,"quality",100),t),(function(e){plus.nativeUI.closeWaiting(),a(e.target)}),(function(e){plus.nativeUI.alert("未知错误！",(function(){}))}))},a=function(e){var t=this,r=i.$http+"/faceValid",n=i.$refs.username.value,a={file:e,account:n},o=i.$qs.stringify(a),s={headers:{"Content-Type":"application/x-www-form-urlencoded"}};i.$axios.post(r,o,s).then((function(e){var r=Number(e.data.code);if(-1!==r){i.$notify({title:"提示",message:"认证成功",type:"success"});var n=e.data.token;localStorage.setItem("token",n),t.innerVisible=!0}else i.$notify({title:"提示",message:"认证失败，请重新认证",type:"warning"})})).catch((function(e){console.log("错误信息"+e)}))},s=null;s={imgUp:function(){plus.nativeUI.actionSheet({cancel:"取消",buttons:[{title:"拍照"}]},(function(e){switch(e.index){case 1:r();break;default:break}}))}};var i=t;s.imgUp()}))}}}),i=s,l=(r("fd8a"),r("2877")),c=Object(l["a"])(i,n,a,!1,null,"04a76188",null);t["default"]=c.exports},"8b97":function(e,t,r){var n=r("d3f4"),a=r("cb7c"),o=function(e,t){if(a(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{n=r("9b43")(Function.call,r("11e9").f(Object.prototype,"__proto__").set,2),n(e,[]),t=!(e instanceof Array)}catch(a){t=!0}return function(e,r){return o(e,r),t?e.__proto__=r:n(e,r),e}}({},!1):void 0),check:o}},9093:function(e,t,r){var n=r("ce10"),a=r("e11e").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,a)}},a481:function(e,t,r){"use strict";var n=r("cb7c"),a=r("4bf8"),o=r("9def"),s=r("4588"),i=r("0390"),l=r("5f1b"),c=Math.max,u=Math.min,f=Math.floor,p=/\$([$&`']|\d\d?|<[^>]*>)/g,d=/\$([$&`']|\d\d?)/g,m=function(e){return void 0===e?e:String(e)};r("214f")("replace",2,(function(e,t,r,g){return[function(n,a){var o=e(this),s=void 0==n?void 0:n[t];return void 0!==s?s.call(n,o,a):r.call(String(o),n,a)},function(e,t){var a=g(r,e,this,t);if(a.done)return a.value;var f=n(e),p=String(this),d="function"===typeof t;d||(t=String(t));var b=f.global;if(b){var h=f.unicode;f.lastIndex=0}var w=[];while(1){var x=l(f,p);if(null===x)break;if(w.push(x),!b)break;var y=String(x[0]);""===y&&(f.lastIndex=i(p,o(f.lastIndex),h))}for(var _="",F=0,$=0;$<w.length;$++){x=w[$];for(var I=String(x[0]),C=c(u(s(x.index),p.length),0),k=[],E=1;E<x.length;E++)k.push(m(x[E]));var S=x.groups;if(d){var N=[I].concat(k,C,p);void 0!==S&&N.push(S);var V=String(t.apply(void 0,N))}else V=v(I,p,C,k,S,t);C>=F&&(_+=p.slice(F,C)+V,F=C+I.length)}return _+p.slice(F)}];function v(e,t,n,o,s,i){var l=n+e.length,c=o.length,u=d;return void 0!==s&&(s=a(s),u=p),r.call(i,u,(function(r,a){var i;switch(a.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(l);case"<":i=s[a.slice(1,-1)];break;default:var u=+a;if(0===u)return r;if(u>c){var p=f(u/10);return 0===p?r:p<=c?void 0===o[p-1]?a.charAt(1):o[p-1]+a.charAt(1):r}i=o[u-1]}return void 0===i?"":i}))}}))},aa77:function(e,t,r){var n=r("5ca1"),a=r("be13"),o=r("79e5"),s=r("fdef"),i="["+s+"]",l="​",c=RegExp("^"+i+i+"*"),u=RegExp(i+i+"*$"),f=function(e,t,r){var a={},i=o((function(){return!!s[e]()||l[e]()!=l})),c=a[e]=i?t(p):s[e];r&&(a[r]=c),n(n.P+n.F*i,"String",a)},p=f.trim=function(e,t){return e=String(a(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(u,"")),e};e.exports=f},b0c5:function(e,t,r){"use strict";var n=r("520a");r("5ca1")({target:"RegExp",proto:!0,forced:n!==/./.exec},{exec:n})},c5f6:function(e,t,r){"use strict";var n=r("7726"),a=r("69a8"),o=r("2d95"),s=r("5dbc"),i=r("6a99"),l=r("79e5"),c=r("9093").f,u=r("11e9").f,f=r("86cc").f,p=r("aa77").trim,d="Number",m=n[d],g=m,v=m.prototype,b=o(r("2aeb")(v))==d,h="trim"in String.prototype,w=function(e){var t=i(e,!1);if("string"==typeof t&&t.length>2){t=h?t.trim():p(t,3);var r,n,a,o=t.charCodeAt(0);if(43===o||45===o){if(r=t.charCodeAt(2),88===r||120===r)return NaN}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:n=2,a=49;break;case 79:case 111:n=8,a=55;break;default:return+t}for(var s,l=t.slice(2),c=0,u=l.length;c<u;c++)if(s=l.charCodeAt(c),s<48||s>a)return NaN;return parseInt(l,n)}}return+t};if(!m(" 0o1")||!m("0b1")||m("+0x1")){m=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof m&&(b?l((function(){v.valueOf.call(r)})):o(r)!=d)?s(new g(w(t)),r,m):w(t)};for(var x,y=r("9e1e")?c(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),_=0;y.length>_;_++)a(g,x=y[_])&&!a(m,x)&&f(m,x,u(g,x));m.prototype=v,v.constructor=m,r("2aba")(n,d,m)}},fd8a:function(e,t,r){"use strict";var n=r("3bbb"),a=r.n(n);a.a},fdef:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=login.b25799c3.js.map